<div class="col-12" *ngIf="loading">
    <div class="card">
        <h5>Liste de Rendez-vous</h5>
        <div class="border-round border-1 surface-border p-4 surface-card">
            <ul class="m-0 p-0 list-none">
                <li class="mb-3">
                    <div class="flex">
                        <p-skeleton shape="circle" size="4rem" styleClass="mr-2"></p-skeleton>
                        <div style="flex: 1">
                            <p-skeleton width="100%" styleClass="mb-2"></p-skeleton>
                            <p-skeleton width="75%"></p-skeleton>
                        </div>
                    </div>
                </li>
                <li class="mb-3">
                    <div class="flex">
                        <p-skeleton shape="circle" size="4rem" styleClass="mr-2"></p-skeleton>
                        <div style="flex: 1">
                            <p-skeleton width="100%" styleClass="mb-2"></p-skeleton>
                            <p-skeleton width="75%"></p-skeleton>
                        </div>
                    </div>
                </li>
                <li class="mb-3">
                    <div class="flex">
                        <p-skeleton shape="circle" size="4rem" styleClass="mr-2"></p-skeleton>
                        <div style="flex: 1">
                            <p-skeleton width="100%" styleClass="mb-2"></p-skeleton>
                            <p-skeleton width="75%"></p-skeleton>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="flex">
                        <p-skeleton shape="circle" size="4rem" styleClass="mr-2"></p-skeleton>
                        <div style="flex: 1">
                            <p-skeleton width="100%" styleClass="mb-2"></p-skeleton>
                            <p-skeleton width="75%"></p-skeleton>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>
<div class="col-12">
    <div class="card" *ngIf="!loading">
        <h5>Liste de Rendez-vous</h5>
        <p-toast></p-toast>
        <p-table [value]="rdvs" dataKey="_id" [expandedRowKeys]="expandedRows" responsiveLayout="scroll">
            <ng-template pTemplate="header">
                <tr>
                    <th style="width: 3rem"></th>
                    <th pSortableColumn="dateheure">Date<p-sortIcon field="dateheure"></p-sortIcon></th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rdv let-expanded="expanded">
                <tr>
                    <td>
                        <button type="button" pButton pRipple [pRowToggler]="rdv"
                            class="p-button-text p-button-rounded p-button-plain"
                            [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></button>
                    </td>
                    <td style="min-width: 12rem;">{{rdv.dateheure | date:'EEEE dd MMMM yyyy HH:mm'}}</td>
                </tr>
            </ng-template>
            <ng-template pTemplate="rowexpansion" let-rdv>
                <tr>
                    <td colspan="7">
                        <div class="p-3">
                            <p-table [value]="rdv.serviceEmpl" dataKey="_id" responsiveLayout="scroll">
                                <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="customer">service <p-sortIcon field="customer"></p-sortIcon></th>
                    <th pSortableColumn="date">prix <p-sortIcon field="date"></p-sortIcon></th>
                    <th pSortableColumn="amount">commission <p-sortIcon field="amount"></p-sortIcon></th>
                    <th pSortableColumn="stats">employe<p-sortIcon field="status"></p-sortIcon></th>
                    <th pSortableColumn="stats">durée<p-sortIcon field="status"></p-sortIcon></th>
                    <th style="width: 4rem"></th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-serviceEmpl>
                <tr>
                    <td>{{serviceEmpl.service.nom}}</td>
                    <td>{{serviceEmpl.service.prix}}</td>
                    <td>{{serviceEmpl.service.commission}}</td>
                    <td>{{serviceEmpl.employe.name}}</td>
                    <td>{{serviceEmpl.service.duree}}</td>
                    <td><p-button type="button" icon="pi pi-check"></p-button></td>
                </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
                <tr>
                    <td colspan="6">vous etes assigné à aucun rendez-vous.</td>
                </tr>
            </ng-template>
        </p-table>
    </div>
    </td>
    </tr>
    </ng-template>
    </p-table>
</div>
</div>